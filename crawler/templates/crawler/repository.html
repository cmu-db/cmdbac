{% extends "crawler/base.html" %}
{% load staticfiles %}

{% block main %}
<h1 class="page-header">Repository {{ repository.full_name }}</h1>
<div>
    Github<a href="https://github.com/{{ repository.full_name }}"><img src="{% static "crawler/github.png" %}" alt="Github" width="24" height="24"/></a> 
Download<a href="https://api.github.com/repos/{{ repository.full_name }}/tarball"><img src="{% static "crawler/download.jpg" %}" alt="Download" width="24" height="24"/></a>
</div>
<br>
<div style="background-color:black; color:white">
>> <a href="{% url 'repositories' %}?{{ queries.urlencode }}#{{repository.full_name}}">Repositories</a> >> {{repository.full_name}}
</div>

<h2 class="sub-header">Repository Detail</h2>
    <div class="bs-example">
        <dl class="dl-horizontal">
            <dt>full_name</dt><dd>{{repository.full_name}}</dd>
            <dt>repo_type</dt><dd>{{repository.repo_type.name}}</li>
            <dt>private</dt><dd>{{repository.private}}</dd>
            <dt>description</dt><dd>{{repository.description}}</dd>
            <dt>fork</dt><dd>{{repository.fork}}</dd>
            <dt>created_at</dt><dd>{{repository.created_at}}</dd>
            <dt>updated_at</dt><dd>{{repository.updated_at}}</dd>
            <dt>pushed_at</dt><dd>{{repository.pushed_at}}</dd>
            <dt>homepage</dt><dd>{{repository.homepage}}</dd>
            <dt>size</dt><dd>{{repository.size}}</dd>
            <dt>stargazers_count</dt><dd>{{repository.stargazers_count}}
            <dt>watchers_count</dt><dd>{{repository.watchers_count}}
            <dt>language</dt><dd>{{repository.language.name}}
            <dt>has_issues</dt><dd>{{repository.has_issues}}
            <dt>has_downloads</dt><dd>{{repository.has_downloads}}
            <dt>has_wiki</dt><dd>{{repository.has_wiki}}
            <dt>has_pages</dt><dd>{{repository.has_pages}}
            <dt>forks_count</dt><dd>{{repository.forks_count}}</dd>
            <dt>open_issues_count</dt><dd>{{repository.open_issues_count}}</dd>
            <dt>default_branch</dt><dd>{{repository.deault_branch}}</dd>
            <dt>network_count</dt><dd>{{repository.network_count}}</dd>
            <dt>subscribers_count</dt><dd>{{repository.subscribers_count}}</dd>
            <dt>commits_count</dt><dd>{{repository.commits_count}}</dd>
            <dt>branches_count</dt><dd>{{repository.branches_count}}</dd>
            <dt>releases_count</dt><dd>{{repository.releases_count}}</dd>
            <dt>contributors_count</dt><dd>{{repository.contributors_count}}</dd>
        </dl>
   </div>

<h2 class="sub-header">Attemps</h2>
Number of Attempts: {{attempts.count}}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Start Time</th>
                <th>Duration</th>
                <th>Host</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
                {% if attempts %}
                {% for attempt in attempts %}
                <tr>
                    <td>{{ attempt.start_time }}</td>
                    {% if attempt.duration %}
                    <td>{{ attempt.duration }}s</td>
                    {% else %}
                    <td></td>
                    {% endif %}
                    <td>{{ attempt.hostname }}</td>
    {% if attempt.result.name == "Success" %}
    <td><a id="{{attempt.id}}" href="{% url 'attempt' attempt.id %}?{{ queries.urlencode }}" class="label label-success">{{attempt.result.name}}</a></td>
    {% elif attempt.result.name == "Running Error" or attempt.result.name == "Missing Dependencies" %}
    <td><a id="{{attempt.id}}" href="{% url 'attempt' attempt.id %}?{{ queries.urlencode }}" class="label label-danger">{{attempt.result.name}}</a></td>
    {% elif attempt.result.name == "Deploying" %}
    <td><a id="{{attempt.id}}" href="{% url 'attempt' attempt.id %}?{{ queries.urlencode }}" class="label label-info">{{attempt.result.name}}</a></td>
    {% else %}
    <td><a id="{{attempt.id}}" href="{% url 'attempt' attempt.id %}?{{ queries.urlencode }}" class="label label-warning">{{attempt.result.name}}</a></td>
    {% endif %}
                </tr>
                {% endfor %}
                {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
