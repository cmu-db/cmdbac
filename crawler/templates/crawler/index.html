{% extends "crawler/base.html" %}

{% block main %}
<h1 class="page-header">Database Web Crawler<h1>

<h2 class="sub-header">Introduction</h2>
This is a website showing result of crawling and deploying database applications that are hosted on GitHub.
<h2 class="sub-header">Statistics</h2>

<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Type Name</th>
                <th># of Repo</th>
                <th># of Deploy</th>
                <th># of Success</th>
            </tr>
        </thead>
        <tbody>
                {% if stats %}
                {% for stat in stats %}
                <tr>
                    <td>{{ stat.repo_type }}</td>
                    <td>{{ stat.num_repo }}</td>
                    <td>{{ stat.num_deploy }}
                    <td>{{ stat.num_suc }}</td>
                </tr>
                {% endfor %}
                {% endif %}
        </tbody>
    </table>
</div>

<h2 class="sub-header">Recent Deployment</h2>
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Time</th>
                <th>Repository</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
                {% if attempts %}
                {% for attempt in attempts %}
                <tr>
                    <td>{{ attempt.time }}</td>
                    <td><a href="{% url 'repository' attempt.repo.get_user_name attempt.repo.get_repo_name %}">{{ attempt.repo.full_name }}</a></td>
                    <td><a href="{% url 'attempt' attempt.id %}">{{ attempt.result.name }}</a></td>
                </tr>
                {% endfor %}
                {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
